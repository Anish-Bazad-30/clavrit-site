<section class="py-3 bg-light body-container">
    <div class="container h-100 flex-grow-1 d-flex flex-column justify-content-evenly align-items-center">
        <h2 class="text-primary">{{pageTitle}}</h2>

        <div *ngIf="type === 'client'" class="container">
            <form [formGroup]="selectedFields" (ngSubmit)="onClientSubmit()" class="row g-3"
                enctype="multipart/form-data">

                <!-- Name -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="name" class="form-control" placeholder="Full Name"
                            formControlName="name">
                        <label for="name">Name</label>
                    </div>
                    <div *ngIf="form.name.touched && form.name.invalid" class="text-danger small mt-1">
                        Name is required.
                    </div>
                </div>

                <!-- Email -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="email" id="email" class="form-control" placeholder="Email" formControlName="email">
                        <label for="email">Email</label>
                    </div>
                    <div *ngIf="form.email.touched && form.email.errors?.['required']" class="text-danger small mt-1">
                        Email is required.
                    </div>
                    <div *ngIf="form.email.touched && form.email.errors?.['email']" class="text-danger small mt-1">
                        Invalid email format.
                    </div>
                </div>

                <!-- Phone -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="phone" class="form-control" placeholder="Phone" minlength="10"
                            maxlength="10" formControlName="phone" (input)="onPhoneInput($event)">
                        <label for="phone">Phone</label>
                    </div>
                    <div *ngIf="form.phone.touched && form.phone.errors?.['required']" class="text-danger small mt-1">
                        Phone is required.
                    </div>
                    <div *ngIf="form.phone.touched && form.phone.errors?.['pattern']" class="text-danger small mt-1">
                        Phone must be 10 digits.
                    </div>
                </div>

                <!-- Company -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="companyname" class="form-control" placeholder="Company"
                            formControlName="company">
                        <label for="company">Company Name</label>
                    </div>
                    <div *ngIf="form.company.touched && form.company.invalid" class="text-danger small mt-1">
                        Company name is required.
                    </div>
                </div>

                <!-- Company Logo -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="file" #fileInput1 id="companyLogo" class="form-control" placeholder="Company Logo"
                            (change)="handleSingleFileInput($event)">
                        <label for="companyLogo">Company Logo</label>
                    </div>
                    <div *ngIf="fileTouched && !selectedFiles" class="text-danger small mt-1">
                        Company logo is required.
                    </div>
                </div>

                <!-- Submit -->
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill">Submit</button>
                </div>
            </form>
        </div>


        <div *ngIf="type === 'blog'" class="container">
            <form [formGroup]="selectedFields" (ngSubmit)="onBlogSubmit()" class="row g-3"
                enctype="multipart/form-data">

                <!-- Title -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="title" class="form-control" formControlName="title"
                            [ngClass]="{'is-invalid': selectedFields.get('title')?.touched && selectedFields.get('title')?.invalid}"
                            placeholder="Title" />
                        <label for="title">Title</label>
                        <div class="invalid-feedback">Title is required.</div>
                    </div>
                </div>

                <!-- Subtitle -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="subtitle" class="form-control" formControlName="subtitle"
                            [ngClass]="{'is-invalid': selectedFields.get('subtitle')?.touched && selectedFields.get('subtitle')?.invalid}"
                            placeholder="Subtitle" />
                        <label for="subtitle">Subtitle</label>
                        <div class="invalid-feedback">Subtitle is required.</div>
                    </div>
                </div>

                <!-- Author Name -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="authorName" class="form-control" formControlName="authorName"
                            [ngClass]="{'is-invalid': selectedFields.get('authorName')?.touched && selectedFields.get('authorName')?.invalid}"
                            placeholder="Author Name" />
                        <label for="authorName">Author Name</label>
                        <div class="invalid-feedback">Author name is required.</div>
                    </div>
                </div>

                <!-- Summary -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <textarea id="summary" class="form-control" formControlName="summary"
                            [ngClass]="{'is-invalid': selectedFields.get('summary')?.touched && selectedFields.get('summary')?.invalid}"
                            style="height: 100px" placeholder="Summary"></textarea>
                        <label for="summary">Summary</label>
                        <div class="invalid-feedback">Summary is required (min 20 characters).</div>
                    </div>
                </div>

                <!-- Content -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <textarea id="content" class="form-control" formControlName="content"
                            [ngClass]="{'is-invalid': selectedFields.get('content')?.touched && selectedFields.get('content')?.invalid}"
                            style="height: 150px" placeholder="Content"></textarea>
                        <label for="content">Content</label>
                        <div class="invalid-feedback">Content is required (min 20 characters).</div>
                    </div>
                </div>

                <!-- Advantages -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <textarea id="advantages" class="form-control" formControlName="advantages"
                            [ngClass]="{'is-invalid': selectedFields.get('advantages')?.touched && selectedFields.get('advantages')?.invalid}"
                            style="height: 100px" placeholder="Advantages"></textarea>
                        <label for="advantages">Advantages</label>
                        <div class="invalid-feedback">Advantages are required.</div>
                    </div>
                </div>

                <!-- Disadvantages -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <textarea id="disadvantages" class="form-control" formControlName="disadvantages"
                            [ngClass]="{'is-invalid': selectedFields.get('disadvantages')?.touched && selectedFields.get('disadvantages')?.invalid}"
                            style="height: 100px" placeholder="Disadvantages"></textarea>
                        <label for="disadvantages">Disadvantages</label>
                        <div class="invalid-feedback">Disadvantages are required.</div>
                    </div>
                </div>

                <!-- Conclusion -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <textarea id="conclusion" class="form-control" formControlName="conclusion"
                            [ngClass]="{'is-invalid': selectedFields.get('conclusion')?.touched && selectedFields.get('conclusion')?.invalid}"
                            style="height: 100px" placeholder="Conclusion"></textarea>
                        <label for="conclusion">Conclusion</label>
                        <div class="invalid-feedback">Conclusion is required.</div>
                    </div>
                </div>

                <!-- Tags -->
                <div class="col-12">
                    <label class="form-label">Tags</label>
                    <div *ngFor="let tag of tags.controls; let i = index" class="d-flex mb-2">
                        <input type="text" class="form-control me-2" [formControl]="getTagControl(i)"
                            [ngClass]="{'is-invalid': getTagControl(i).touched && getTagControl(i).invalid}"
                            placeholder="Enter a tag" />
                        <button type="button" class="btn btn-danger" (click)="removeTag(i)"
                            *ngIf="tags.length > 1">×</button>
                    </div>
                    <button type="button" class="btn btn-outline-primary btn-sm" (click)="addTag()">+ Add Tag</button>
                </div>

                <!-- Image Upload -->
                <!-- <input type="file" class="form-control" id="imageUrl" (change)="onFileSelected($event)"
                    formControlName="image"
                    [ngClass]="{'is-invalid': selectedFields.get('image')?.touched && selectedFields.get('image')?.invalid}"
                    multiple />
                <div class="invalid-feedback">
                    At least one image is required.
                </div> -->
                <div class="mb-3">
                    <!-- Image Upload Section -->
                    <div class="image-upload-section d-flex justify-content-between align-items-center">
                        <label for="Add-image" class="form-label secondary-font">Add Images</label>
                        <button type="button" class="upload-button mb-3" (click)="triggerFileInput()">
                            Add <img src="assets/img/Add.svg" />
                        </button>
                    </div>

                    <!-- Hidden File Input -->
                    <input type="file" id="images" #fileInput accept="image/*,video/*" class="hidden-input" multiple
                        (change)="onImageUpload($event)" style="display: none;" />

                    <!-- Image/Video Preview Section -->

                    <div class="preview-container w-100 d-flex"
                        style="background:none; border: 2px solid #7fdbff; padding: 5px; border-radius: 10px;">

                        <div class="image-container d-flex" *ngFor="let file of previewUrls; let i = index">

                            <img [src]="file" class="main-img m-2" />


                            <img src="../../../assets/img/Minus.svg" class="delete-icon" (click)="removeFile(i)" />
                        </div>

                    </div>
                    <div *ngIf="fileError" class="text-danger mt-2">
                        Please upload at least one image.
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill">Submit</button>
                </div>

            </form>
        </div>


        <div *ngIf="type === 'project'" class="container">
            <form [formGroup]="selectedFields" (ngSubmit)="onProjectSubmit()" class="row g-3"
                enctype="multipart/form-data">

                <!-- Title -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="title" class="form-control" placeholder="Title" formControlName="title">
                        <label for="title">Title</label>
                    </div>
                    <div *ngIf="selectedFields.get('title')?.touched && selectedFields.get('title')?.invalid"
                        class="text-danger small mt-1">
                        Title is required.
                    </div>
                </div>

                <!-- Summary -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <textarea id="summary" class="form-control" placeholder="Summary" formControlName="summary"
                            style="height: 120px"></textarea>
                        <label for="summary">Summary</label>
                    </div>
                    <div *ngIf="selectedFields.get('summary')?.touched && selectedFields.get('summary')?.invalid"
                        class="text-danger small mt-1">
                        Summary is required.
                    </div>
                </div>

                <!-- Images Upload -->
                <!-- <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="file" id="imageUrl" class="form-control" formControlName="image"
                            (change)="handleSingleFileInput($event)" multiple>
                        <label for="imageUrl">Upload Images</label>
                    </div>
                    <div *ngIf="selectedFields.get('image')?.touched && selectedFields.get('image')?.invalid"
                        class="text-danger small mt-1">
                        At least one image is required.
                    </div>
                </div> -->

                <div class="mb-3">
                    <!-- Image Upload Section -->
                    <div class="image-upload-section d-flex justify-content-between align-items-center">
                        <label for="Add-image" class="form-label secondary-font">Add Images/Videos</label>
                        <button type="button" class="upload-button mb-3" (click)="triggerFileInput()">
                            Add <img src="assets/img/Add.svg" />
                        </button>
                    </div>

                    <!-- Hidden File Input -->
                    <input type="file" id="images" #fileInput accept="image/*,video/*" class="hidden-input" multiple
                        (change)="onImageUpload($event)" style="display: none;" />

                    <!-- Image/Video Preview Section -->

                    <div class="preview-container w-100 d-flex"
                        style="background:none; border: 2px solid #7fdbff; padding: 5px; border-radius: 10px;">

                        <div class="image-container d-flex" *ngFor="let file of previewUrls; let i = index">

                            <img [src]="file" class="main-img m-2" />


                            <img src="../../../assets/img/Minus.svg" class="delete-icon" (click)="removeFile(i)" />
                        </div>

                    </div>
                    <div *ngIf="fileError" class="text-danger mt-2">
                        Please upload at least one image.
                    </div>
                </div>

                <!-- Technologies -->
                <div class="col-12 mt-4">
                    <label>Technologies</label>
                    <div *ngFor="let tech of technologies.controls; let i = index" class="d-flex mb-2">
                        <input type="text" class="form-control me-2" [formControl]="getTechnologyControl(i)"
                            placeholder="Enter a technology">
                        <button type="button" class="btn btn-danger" (click)="removeTechnology(i)"
                            *ngIf="technologies.length > 1">×</button>
                    </div>
                    <button type="button" class="btn btn-outline-primary btn-sm" (click)="addTechnology()">+ Add
                        Technology</button>
                    <div *ngIf="technologies.invalid && selectedFields.get('technologies')?.touched"
                        class="text-danger small mt-1">
                        At least one technology is required.
                    </div>
                </div>

                <!-- Key Points -->
                <div class="col-12 mt-4">
                    <label>Key Points</label>
                    <div *ngFor="let point of keyPoints.controls; let i = index" class="d-flex mb-2">
                        <input type="text" class="form-control me-2" [formControl]="getKeyPointsControl(i)"
                            placeholder="Enter a key point">
                        <button type="button" class="btn btn-danger" (click)="removeKeyPoints(i)"
                            *ngIf="keyPoints.length > 1">×</button>
                    </div>
                    <button type="button" class="btn btn-outline-primary btn-sm" (click)="addKeyPoints()">+ Add Key
                        Points</button>
                    <div *ngIf="keyPoints.invalid && selectedFields.get('keyPoints')?.touched"
                        class="text-danger small mt-1">
                        At least one key point is required.
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill">Submit</button>
                </div>
            </form>
        </div>


        <div *ngIf="type === 'service'" class="container">
            <form [formGroup]="selectedFields" (ngSubmit)="onServiceSubmit()" class="row g-3"
                enctype="multipart/form-data">

                <!-- Name -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="name" class="form-control" placeholder="Name" formControlName="name">
                        <label for="name">Name</label>
                    </div>
                    <div *ngIf="selectedFields.get('name')?.touched && selectedFields.get('name')?.invalid"
                        class="text-danger small mt-1">
                        Name is required.
                    </div>
                </div>

                <!-- Description -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <textarea id="description" class="form-control" placeholder="Description"
                            formControlName="description" style="height: 120px"></textarea>
                        <label for="description">Description</label>
                    </div>
                    <div *ngIf="selectedFields.get('description')?.touched && selectedFields.get('description')?.invalid"
                        class="text-danger small mt-1">
                        Description is required.
                    </div>
                </div>

                <!-- Type -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="type" class="form-control" placeholder="Type" formControlName="type">
                        <label for="type">Type</label>
                    </div>
                    <div *ngIf="selectedFields.get('type')?.touched && selectedFields.get('type')?.invalid"
                        class="text-danger small mt-1">
                        Type is required.
                    </div>
                </div>

                <!-- Image Upload -->
                <!-- <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="file" id="imageUrl" class="form-control" (change)="handleSingleFileInput($event)"
                            multiple>
                        <label for="imageUrl">Upload Images</label>
                    </div>
                    <div *ngIf="!selectedFiles && formSubmitted" class="text-danger small mt-1">
                        At least one image is required.
                    </div>
                </div> -->


                <div class="mb-3">
                    <!-- Image Upload Section -->
                    <div class="image-upload-section d-flex justify-content-between align-items-center">
                        <label for="Add-image" class="form-label secondary-font">Add Images/Videos</label>
                        <button type="button" class="upload-button mb-3" (click)="triggerFileInput()">
                            Add <img src="assets/img/Add.svg" />
                        </button>
                    </div>

                    <!-- Hidden File Input -->
                    <input type="file" id="images" #fileInput accept="image/*,video/*" class="hidden-input" multiple
                        (change)="onImageUpload($event)" style="display: none;" />

                    <!-- Image/Video Preview Section -->

                    <div class="preview-container w-100 d-flex"
                        style="background:none; border: 2px solid #7fdbff; padding: 5px; border-radius: 10px;">

                        <div class="image-container d-flex" *ngFor="let file of previewUrls; let i = index">

                            <img [src]="file" class="main-img m-2" />


                            <img src="../../../assets/img/Minus.svg" class="delete-icon" (click)="removeFile(i)" />
                        </div>

                    </div>
                    <div *ngIf="fileError" class="text-danger mt-2">
                        Please upload at least one image.
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill">Submit</button>
                </div>
            </form>
        </div>


        <div *ngIf="type === 'job-detail'" class="container">
            <form [formGroup]="selectedFields" (ngSubmit)="onjobDetailsSubmit()" class="row g-3">

                <!-- Job Designation -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="jobDesignation" class="form-control" placeholder="Job Designation"
                            formControlName="jobDesignation">
                        <label for="jobDesignation">Job Designation</label>
                    </div>
                    <div *ngIf="formSubmitted && selectedFields.get('jobDesignation')?.invalid"
                        class="text-danger small mt-1">
                        Job Designation is required.
                    </div>
                </div>

                <!-- Job Category -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="jobCategory" class="form-control" placeholder="Job Category"
                            formControlName="jobCategory">
                        <label for="jobCategory">Job Category</label>
                    </div>
                    <div *ngIf="formSubmitted && selectedFields.get('jobCategory')?.invalid"
                        class="text-danger small mt-1">
                        Job Category is required.
                    </div>
                </div>

                <!-- Job Type -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <select id="jobType" class="form-select" formControlName="jobType">
                            <option value="" disabled>Select Job Type</option>
                            <option value="Full-Time">Full-Time</option>
                            <option value="Part-Time">Part-Time</option>
                            <option value="Contract">Contract</option>
                            <option value="Internship">Internship</option>
                        </select>
                        <label for="jobType">Job Type</label>
                    </div>
                    <div *ngIf="formSubmitted && selectedFields.get('jobType')?.invalid" class="text-danger small mt-1">
                        Job Type is required.
                    </div>
                </div>

                <!-- Job Location -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="jobLocation" class="form-control" placeholder="Job Location"
                            formControlName="jobLocation">
                        <label for="jobLocation">Job Location</label>
                    </div>
                    <div *ngIf="formSubmitted && selectedFields.get('jobLocation')?.invalid"
                        class="text-danger small mt-1">
                        Job Location is required.
                    </div>
                </div>

                <!-- Industry -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="industry" class="form-control" placeholder="Industry"
                            formControlName="industry">
                        <label for="industry">Industry</label>
                    </div>
                    <div *ngIf="formSubmitted && selectedFields.get('industry')?.invalid"
                        class="text-danger small mt-1">
                        Industry is required.
                    </div>
                </div>

                <!-- Job Responsibilities -->
                <div class="col-12">
                    <label class="form-label">Job Responsibilities</label>
                    <div formArrayName="jobResponsibility">
                        <div *ngFor="let res of jobResponsibility.controls; let i = index"
                            class="d-flex flex-column mb-2">
                            <div class="d-flex">
                                <input type="text" class="form-control me-2" [formControlName]="i"
                                    placeholder="Enter responsibility">
                                <button type="button" class="btn btn-danger" (click)="removeResponsibility(i)"
                                    *ngIf="jobResponsibility.length > 1">×</button>
                            </div>

                            <!-- Validation message -->
                            <div *ngIf="res.invalid && res.touched" class="text-danger small mt-1">
                                Responsibility is required.
                            </div>
                        </div>

                        <button type="button" class="btn btn-outline-primary btn-sm" (click)="addResponsibility()">
                            + Add Responsibility
                        </button>
                    </div>

                </div>

                <!-- Job Qualifications -->
                <div class="col-12">
                    <label class="form-label">Job Qualifications</label>
                    <div formArrayName="jobQualification">
                        <div *ngFor="let qual of jobQualification.controls; let i = index"
                            class="d-flex flex-column mb-2">
                            <div class="d-flex">
                                <input type="text" class="form-control me-2" [formControlName]="i"
                                    placeholder="Enter qualification">
                                <button type="button" class="btn btn-danger" (click)="removeQualification(i)"
                                    *ngIf="jobQualification.length > 1">×</button>
                            </div>
                            <div *ngIf="qual.invalid && qual.touched" class="text-danger small mt-1">
                                Qualification is required.
                            </div>
                        </div>

                        <button type="button" class="btn btn-outline-primary btn-sm" (click)="addQualification()">
                            + Add Qualification
                        </button>
                    </div>

                </div>

                <!-- Competencies -->
                <div class="col-12">
                    <label class="form-label">Competencies</label>
                    <div formArrayName="competencies">
                        <div *ngFor="let comp of competencies.controls; let i = index" class="d-flex flex-column mb-2">
                            <div class="d-flex">
                                <input type="text" class="form-control me-2" [formControlName]="i"
                                    placeholder="Enter competency">
                                <button type="button" class="btn btn-danger" (click)="removeCompetency(i)"
                                    *ngIf="competencies.length > 1">×</button>
                            </div>
                            <div *ngIf="comp.invalid && comp.touched" class="text-danger small mt-1">
                                Competency is required.
                            </div>
                        </div>

                        <button type="button" class="btn btn-outline-primary btn-sm" (click)="addCompetency()">
                            + Add Competency
                        </button>
                    </div>

                </div>

                <!-- Submit Button -->
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill">Submit</button>
                </div>

            </form>
        </div>

        <div *ngIf="type === 'business-stats'" class="container">
            <form [formGroup]="selectedFields" (ngSubmit)="onStatsSubmit()" class="row g-3">

                <!-- Name -->
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="title" class="form-control" placeholder="Title" formControlName="title">
                        <label for="title">Title</label>
                    </div>
                    <div *ngIf="selectedFields.get('title')?.touched && selectedFields.get('title')?.invalid"
                        class="text-danger small mt-1">
                        Title is required.
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="text" id="value" class="form-control" placeholder="Value" formControlName="value"
                            minlength="1" maxlength="10" (input)="onPhoneInput($event)">
                        <label for="value">Value</label>
                    </div>
                    <div *ngIf="selectedFields.get('value')?.touched && selectedFields.get('value')?.invalid"
                        class="text-danger small mt-1">
                        Value is required.
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-floating">
                        <input type="file" #fileInput1 id="companyLogo" class="form-control" placeholder="Company Logo"
                            (change)="handleSingleFileInput($event)">
                        <label for="companyLogo">Company Logo</label>
                    </div>
                    <div *ngIf="fileTouched && !selectedFiles" class="text-danger small mt-1">
                        Company logo is required.
                    </div>
                </div>
                <!-- Submit Button -->
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill">Submit</button>
                </div>
            </form>
        </div>
    </div>
</section>